# OSI 7계층

> OSI (Open System Interconnection) : 개방형 시스템 상호연결 참조 모델 7계층
>
> - ISO 단체에서 개발한 통신에 관한 계층화 표준 모델
> - 네트워크 프로토콜 디자인과 통신 과정을 7개의 계층으로 구분하여 만든 표준 규격
>   - 계층의 특징 : 빠른 문제 해결 가능, 위 아래 층으로만 이동 가능(건너뛰기 불가)
>   - 각 계층에서 데이터가 전송될 때, 헤더를 붙여서 전송
> - 이질적인 시스템(이기종 시스템) 간 네트워크 상호호환이 가능
> - 전송하고자 하는 데이터에 각 계층에서 담당하는 정보들을 담아낸다
>   - 이전 계층에서 넘어온 단위 : SDU
>   - 지금 계층에서 완성되어 전송될 단위 : PDU
>   - 지금 계층에서 새로 추가된 단위 : PCI



### OSI 7계층의 필요성

#### 데이터란?

- 수많은 0과 1로 이루어진 정보
- 컴퓨터는 2진법의 숫자를 전기의 켜짐, 꺼짐으로 표현
- 즉, 컴퓨터에게 데이터는 아주 긴 전기신호



#### 프로토콜의 필요성

- 데이터가 상대방에게 전달되기 위해서는 표준화된 어떤 약속 혹은 절차가 필요
- 송신 측 : 데이터를 안전하고 정확하고 신속하게 포장하는 방법. 즉, 규격화가 필요
- 수신 측 : 데이터를 안전하고 정확하고 신속하게 해석하는 방법 필요
- 네트워크를 공부한다는 것은 수많은 프로토콜을 학습한다는 것
- 컴퓨터 간 데이터를 주고 받을 때, 에러가 발생하지 않도록 알맞게 전송하고, 이를 수신하여 다시 기존 정보로 변환하는 과정



#### 탄생 배경

- 초기 여러 정보통신업체 장비들은 자신의 장비들끼리만 연결이 되어 호환성이 필요 없었음
- 모든 시스템들의 상호 연결에 있어 문제가 없도록 표준을 정한 것



#### 7계층_응용 계층

- 사용자와 바로 연결되어있음

  - 사용자로부터 정보를 입력받아 하위 계층으로 전달
  - 하위 계층에서 전송한 데이터를 사용자에게 전달

- 응용 SW를 도와주는 계층

  - 여러가지 응용 서비스를 네트워크에 연결해주는 역할

- ex) 크롬, 파이어폭스, 스카이프 등

- 프로토콜 : HTTP, FTP, SMTP 등

  

#### 6계층_표현 계층

- 송신 측과 수신 측 사이의 데이터 형식을 지정
  - 서로 다른 데이터의 형식을 통일시켜주는 것
- **코드 변환, 구문 검색, 암호화/복호화, 인코딩/디코딩 역할 수행**
  - 올바른 표준 방식으로 변환해주는 것
- 데이터 표현방식, 상이한 부호체계 간의 변화에 대해 규정
- 코드 간의 번역을 담당한다고 보면 됨
  - ex) 해당 데이터가 txt인지, gif인지, jpg인지 구분하는 것이 표현 계층의 몫

- 프로토콜 : JPG, MPEG, SMB 등



#### 5계층_세션계층

- 상대편과 나를 서로 연결 유지
- 응용 프로그램 간의 논리적인 연결 생성 및 제어 담당
- 양 끝단의 **응용 프로세스**가 통신을 관리하기 위한 방법 제공
  - 동시 송수신 방식, 반이중 방식, 전이중 방식 등의 방법
- TCP/IP 세션을 만들고 없애는 책임
- **통신하는 사용자들을 동기화**하고, 오류복구 명령들을 일괄적으로 다룸
  - 통신을 하기 위한 세션을 확립/유지/중단
    - 운영체제가 이 역할 수행
- 세션 : 클라이언트와 웹 서버 간 네트워크 연결이 지속 유지되고 있는 상태



#### 4계층_전송계층

> 1. 데이터가 제대로 도착했는지 확인
>    - 라우팅 정보가 잘못되었거나, 라우터에 문제가 생겨서 패킷이 손상되거나 유실되었는지 확인
> 2. 전송된 데이터의 목적지가 어떤 애플리케이션인지 식별

- 출발지-목적지 간 제어와 에러 관리
- 패킷들의 전송이 유효한지 확인하고 전송 실패한 패킷을 재전송
- 도착지 컴퓨터의 최종 도착지인 **프로세스**에까지 데이터가 도달하게 하는 모듈 
  - 호스트의 구체적인 목적지(=프로세스)까지 데이터가 도달할 수 있도록 함
  - 어떤 응용 프로그램으로 데이터를 보낼 것인가?

- 프로세스를 특정하기 위한 주소로 **포트 넘버 사용**
  - 포트번호 : 디바이스에 있는 여러 프로세스 중 자기가 가야할 프로세스를 구분하기 위한 번호
  - IP 주소와 MAC 주소로 컴퓨터를 찾았다면, 컴퓨터 안에서 포트 번호로 프로그램을 찾는다
    - cmd 창에서 `netstat -ano` 로 확인 가능
    - 위에서 확인한 PID를 `작업관리자-자세히` 에서 비교하여 어떤 프로그램이 어떤 port 번호를 갖고 있는지 확인 가능
  - 포트 번호는 TCP와 UDP 프로토콜이 있음
- 분할, 재조합, 연결제어, 흐름제어, 오류제어, 혼잡제어 수행
  - 신뢰성 있는 통신을 보장
- 단위 : 세그먼트
  - TCP 헤더가 붙은 것
  - **TCP 헤더에는 목적지까지 데이터를 제대로 전송하기 위해 필요한 정보(ex. 포트정보)를 갖고 있음**
- 주요 프로토콜 : TCP, UDP
- 주요 장비 : 게이트웨이, L4 switch



#### 3계층_네트워크 계층

- 서로 다른 네트워크에 있는 목적지로 데이터 전송을 위해 필요
  - 데이터링크 계층에서는 같은 네트워크에 있는 컴퓨터로만 데이터 전송 가능
  - 같은 네트워크는 스위치로 연결된 서로 다른 컴퓨터를 의미
- **주소를 찾고 최적의 경로를 선택하여 제어**
  - 최적 경로를 위해 라우팅 알고리즘을 사용 (가장 중요)
    - 여기에 사용되는 프로토콜이나 기술은 매우 다양
- 목적지 주소로 IP 주소를 정하고, 그에 따른 경로를 선택한 후, 경로에 따라 패킷을 전달
- 각 패킷이 목적지까지 성공적이고 효과적으로 전달되도록 함
- 라우팅, 흐름 제어, 세그멘테이션, 오류 제어, 인터네트워킹 등을 수행
- 단위 : 패킷
  - 프레임에 IP 헤더를 붙인 것
- 주요 장비 : 라우터, L3 스위치



####  2계층_데이터링크 계층

> - 허브로 연결되어있는 네트워크에서 한 컴퓨터가 데이터를 보낼 경우, 나머지 모든 컴퓨터도 정보를 볼 수 있음
>  - 특정 컴퓨터에만 데이터를 보내고 싶어도 그럴 수 없다는 것
> 
>- 이러한 문제를 해결할 수 있는 것이 데이터링크 계층

- 데이터의 오류와 흐름을 관리하여 **안전한 정보 전달**을 수행 할 수 있도록 함
- 인접한 노드간 **신뢰성 있는 데이터 전송**을 보장
  - 노드는 네트워크에 연결되어있는 한개 한개의 기계
- 네트워크 카드의 MAC 주소를 통해 목적지를 찾아감
  - 데이터에 MAC 주소를 부여
    - 네트워크 상 장치에 올바르게 도착할 수 있도록 하는 것
  - MAC 주소는 컴퓨터의 물리적 주소를 의미
    - 모든 랜카드에는 고유한 맥주소가 존재(ex. 주민등록번호)
- 흐름제어, 오류제어, 회선제어 수행
  - 통신상 오류를 찾고, 재전송하는 기능을 가짐
- 논리링크제어계층 & 매체접근제어계층 두 개의 부계층으로 나뉨
- 단위 : 프레임
  - 데이터에 이더넷 헤더(MAC 주소 포함)와 트레일러(데이터 전송 중 오류 발생 여부 확인)를 붙임
- 주요 장비 : 브릿지, L2 스위치



#### 1계층_물리 계층

- 전기적 및 물리적 세부 사항을 정의한 계층

- **디지털 신호(데이터)를 아날로그 신호(전기적 신호)로 변환**
  - 물리적 전송이 가능하도록 함
- 물리적인 전송 매체를 통해 상대측 물리 계층으로 아날로그 신호 전달
  - 그저 전달만 하고, 데이터가 무엇인지는 신경쓰지 않음
  - 전달받은 컴퓨터는 물리계층을 통해 다시 디지털 신호로 변환
- 단위 : Bit
- 주요 장비 : 허브, 리피터, 네트워크 카드(랜카드), 통신 케이블
  - 리피터는 전기 신호를 정형하고 **증폭하는 기능**
  - 허브는 컴퓨터를 여러대 연결하는 장치
    - 직접 컴퓨터끼리 연결하지 않아도 허브로 통신 가능
  - 랜카드는 주로 메인보드에 함께 있고, 아니면 외장랜카드 사용



#### 네트워크 전체 흐름

![img](https://velog.velcdn.com/images%2Fapril_5%2Fpost%2F4bd6805d-8bfd-4344-9f82-d4363be3e55c%2Fimage.png)

[[출처_네트워크 구조 이해:: 네트워크의 전체 흐름 살펴보기(april.log)]](https://velog.io/@april_5/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EA%B5%AC%EC%A1%B0-%EC%9D%B4%ED%95%B4-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%9D%98-%EC%A0%84%EC%B2%B4-%ED%9D%90%EB%A6%84-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0)





## 네트워크 면접 질문

#### 1. 라우팅 알고리즘에 대해 설명하세요

##### 라우팅

- 라우팅이란 다른 네트워크로 통신할 때, 최적의 경로를 결정하는 것을 의미합니다.

##### 중앙 집중형 라우팅 알고리즘

- 네트워크 전체에 대한 완전한 정보를 갖고 출발지와 목적지 사이의 최소 비용 경로를 계산
- Link State 알고리즘이 여기에 속하며, 주로 다익스트라 알고리즘을 사용
- Link State 알고리즘
  - 한 노드에서 다른 모든 노드까지의 최적경로를 계산해 routing table에 저장



##### 분산 라우팅 알고리즘

- 최소 비용 경로의 계산이 라우터들에 의해 반복적이고 분산된 방식으로 수행
  - 모든 링크 비용에 대한 완전한 정보를 갖고 있지 않음
  - 각 라우터는 자신에게 연결된 인접 노드에 대한 비용만 알고 있음
- Distance Vector 알고리즘이 여기 속하며, 벨만-포드 알고리즘을 사용
- Distance Vector 알고리즘
  - 반복적이고 비동기적이며 분산적, 이웃끼리 반복해서 정보를 교환해 최적의 경로 갱신



#### 2. 라우터와 스위치의 차이에 대해 설명하세요

|                     | 스위치                                                       | 라우터                          |
| ------------------- | ------------------------------------------------------------ | ------------------------------- |
| OSI 계층            | 데이터 링크 계층                                             | 네트워크 계층                   |
| 작동 기반           | MAC 주소 기반 작동                                           | IP 주소 기반 작동               |
| 브로드캐스트 도메인 | 브로드캐스트 도메인 구분 X                                   | 브로드캐스트 도메인 구분        |
| 불량 데이터         | 불명확한 목적지를 가진 데이터는<br>모든 포트로 데이터 전송(=브로드캐스팅) | 불명확한 목적지의 데이터는 폐기 |
| 관리자 설정         | 관리자의 별도 설정 없이 사용 가능                            | 관리자의 설정 필요              |
| 연결 대상           | 같은 네트워크 내부로 연결                                    | 서로 다른 네트워크를 연결       |



#### 3. DNS에 대해 설명하세요

##### 역할

- 사람이 기억하기 쉽게 문자로 만들어진 도메인을 숫자로 된 IP 주소로 바꿔주는 시스템



##### 특징

- 전 세계적으로 약속된 규칙 공유
- 상위 기관에서 인증된 기관에게 도메인을 생성하거나 IP주소로 변경할 수 있는 권한 부여
  - 즉, 계층구조를 가지는 분산데이터베이스 구조를 가짐



##### DNS 서버 종류

> DNS 서버 : 도메인 네임 스페이스의 트리 구조에 대한 정보를 갖고 있는 서버
>
> 데이터베이스 역할, 데이터를 찾아주는 역할, 요청 처리, 응답 구현 등의 역할 수행
>
> 도메인 수가 너무 많기 때문에, DNS 서버 종류를 계층화해서 단계적으로 처리

- Root DNS Server : ICANN이 직접 관리하는 절대 존엄 서버로 TLD DNS 서버의 IP들을 저장해두고 안내 (***.com, *\*\*.net, \*\*\*.org)
- TLD(최상위 도메인) DNS Server : 도메인 등록 기관이 관리하는 서버로 Authoritative DNS 서버 주소를 저장해두고 안내 (A/B/C.com, D/E/F.com)
- Authoritative DNS Server(= SLD Server) : 실제 개인 도메인과 IP 주소의 관계가 기록/저장/변경되는 서버
  - 일반적으로 도메인/호스팅 업체의 네임서버를 의미. (개인 DNS 서버를 구축한 경우에도 여기에 해당)
- Recursive DNS Server : 인터넷 사용자가 가장 먼저 접근하는 DNS 서버로, 한번 거친 데이터를 캐시 형태로 저장해두는 서버. 
  - 대표적으로 ISP(통신사) DNS 서버가 있음
  - 다른 서버와 다르게 권한 없는 DNS 서버



##### 동작 과정

1. 브라우저는 Recursive DNS Server에 IP 주소 요청

2. 없다면, Root DNS Server에게 해당 도메인에 대한 IP 주소 요청

3. Root DNS Server는 TLD DNS Server 주소 안내

4. 안내 받은 TLD DNS Server에 IP 주소 요청

5. TLD DNS Server는 해당 도메인이 관리되고 있는 SLD Server 주소 안내

6. 다시 요청

7. SLD Server로부터 IP 주소 전달받음



#### 4. OSI 계층에 대해 설명하세요

- [이동](# OSI 7계층)

