# Computer Architecture

# 질문

### CPU 내부 구조가 어떻게 되나요?

CPU는 ALU, CU, Register로 구성됩니다. 연산을 하는 ALU, 적절한 일을 선택해주는 CU, CPU 내의 임시 데이터 저장 공간 Register로 구성됩니다.

### 명령어가 실행되는 과정이 어떻게 되나요?

명령어 사이클의 5가지 과정인 명령어 인출, 명령어 해독, 데이터 인출, 데이터 처리, 데이터 저장의 과정을 거쳐 하나의 명령어가 실행됩니다.

# 학습 내용

## CPU

### ALU (Arithmetic Logic Unit)

산술 연산과 논리 연산을 수행한다. (+, -, AND, OR)

### Register

CPU에 임시로 데이터를 저장하기 위한 공간. CPU의 저장 장치 중 가장 빠르다.

### CU (Control Unit)

ALU가 어떤 연산을 할지 선택해주는 부분

## Memory

### 주기억장치

- RAM (Read Access Memory) : 휘발성 메모리로서, 사용 중인 프로그램이나 데이터가 들어가 있다.
- ROM (Read Only Memory) : 비 휘발성 메모리로서, 읽기만 가능하다. 주로 시스템 소프트웨어를 저장한다.

### 보조기억장치

- 주 기억장치보단 느리지만, 많은 양의 데이터를 저장가능하며, 전원이 꺼져도 데이터가 남아있다.

### 메모리 구조

1. Stack 영역 : 지역 변수, 매개 변수. push/pop으로 동작. 메모리의 높은 순서로 낮은 순서로 실행
2. Heap 영역 : 프로그래머의 동적할당된 메모리가 존재. 메모리의 낮은 순서로 높을 순서로 실행
3. Data 영역 / BSS 영역 : 정적변수, 전역변수
4. Code 영역 : 프로그램 코드

## Cache

- CPU에 존재하는 작은 저장공간
- 메모리와 I/O 과정의 시간을 줄이기 위해 자주 사용하는 데이터들을 임시로 담아 놓음
- L1, L2, L3등이 있으며, 숫자가 클 수록 속도가 느리고 저장공간이 크다.

## 명령어가 실행되는 과정

### 명령어 실행에 필요한 레지스터들

1. PC (Program counter)
   1. 다음에 인출할 명령어의 주소를 가지고 있는 레지스터
   2. 각 명령어가 인출된 후에는 자동적으로 일정 크기만큼 증가
   3. 분기 명령어가 실행될 경우에는 해당하는 목적지 주소로 갱신
2. AC (accumulator)
   1. 데이터를 일시적으로 저장하는 레지스터
   2. 레지스터의 길이는 CPU가 한 번에 처리할 수 있는 데이터 비트 수와 동일
3. IR (Instruction Register)
   1. 가장 최근에 인출된 명령어 코드가 저장되는 레지스터
4. MAR (Memory Address Register)
   1. PC에 저장된 명령어 주소가 시스템 주소 버스로 출력되기 전에 일시적으로 저장되는 주소 레지스터
   2. 레지스터는 시스템 주소 버스와 직접적으로 연결되어 있는 인터페이스
5. MBR (Memory Buffer Register)
   1. 기억장치에 쓰여질 데이터 혹은 기억장치로부터  읽혀진 데이터를 일시적으로 저장하는 버퍼 레지스터
   2. 데이터 뿐만 아니라 명령어도 저장

### 명령어 사이클

1. 인출 사이클 (명령어 인출)
   1. 프로그램 카운터(PC)에는 다음에 인출할 명령어의 주소가 있음. 그 내용을 CPU 내부 버스를 통하여 MAR로 전송합니다.
   2. 주소가 지정하는 기억장치 위치로부터 읽혀진 명령어가 데이터 버스를 통하여 MBR로 적재됩니다.
   3. PC에 명령어의 길이 만큼을 더합니다. (다음 명령 주소로 이동)
   4. MBR에 있는 명령어 코드가 명령어 레지스터인 IR로 이동됩니다.
2. 명령어 해석 (명령어 해석 ~ 데이터 저장) : CPU가 명령어 해석 후 아래의 연산 중 하나를 한다.
   1. 데이터 이동 : CPU와 기억 장치 혹은 I/O 장치 간의 데이터를 이동합니다.
   2. 데이터의 저장 : 연산 결과 데이터 혹은 입력 장치로부터 읽어 들인 데이터를 기억 장치에 저장합니다.
   3. 데이터 처리 : 데이터에 대하여 산술 혹은 논리 연산을 수행합니다.
   4. 프로그램 제어 : 프로그램의 실행 순서를 결정합니다.